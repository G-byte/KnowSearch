{
    "size":0,
    "query":{
        "bool":{
            "must":[
                {
                    "term":{
                        "appid":{
                            "value":%d
                        }
                    }
                },
                {
                    "term":{
                        "dslTemplateMd5":{
                            "value":"%s"
                        }
                    }
                },
                {
                    "range":{
                        "timeStamp":{
                            "gte":%d,
                            "lte":%d,
                            "format":"epoch_millis"
                        }
                    }
                }
            ]
        }
    },
    "aggs":{
        "groupByTimeStamp":{
            "date_histogram":{
                "field":"timeStamp",
                "interval":"20m",
                "time_zone":"Asia/Shanghai",
                "min_doc_count":1,
                "extended_bounds":{
                    "min":%d,
                    "max":%d
                }
            },
            "aggs":{
                "searchCount":{
                    "avg":{
                        "field":"searchCount"
                    }
                },
                "totalCostAvg":{
                    "avg":{
                        "field":"totalCostAvg"
                    }
                },
                "esCostAvg":{
                    "avg":{
                        "field":"esCostAvg"
                    }
                },
                "totalShardsAvg":{
                    "avg":{
                        "field":"totalShardsAvg"
                    }
                },
                "totalHitsAvg":{
                    "avg":{
                        "field":"totalHitsAvg"
                    }
                },
                "failedShardsAvg":{
                    "avg":{
                        "field":"failedShardsAvg"
                    }
                },
                "dslLenAvg":{
                    "avg":{
                        "field":"dslLenAvg"
                    }
                },
                "responseLenAvg":{
                    "avg":{
                        "field":"responseLenAvg"
                    }
                }
            }
        }
    }
}
{
    "query":{
        "bool":{
            "must":[
                {
                    "range":{
                        "timestamp":{
                            "gte":%d,
                            "lte":%d
                        }
                    }
                },
                {
                    "term":{
                        "cluster":{
                            "value":"%s"
                        }
                    }
                },
                {
                    "term":{
                        "template":{
                            "value":"%s"
                        }
                    }
                }
            ]
        }
    },
    "aggs":{
        "time":{
            "date_histogram":{
                "field":"timestamp",
                "interval":"minute"
            },
            "aggs":{
                "search-query_total_rate":{
                    "sum":{
                        "field":"metrics.search-query_total_rate"
                    }
                },
                "indexing-index_total_rate":{
                    "sum":{
                        "field":"metrics.indexing-index_total_rate"
                    }
                },
                "indices-search-query_avg_time":{
                    "sum":{
                        "field":"metrics.indices-search-query_avg_time"
                    }
                }
            }
        },
        "avg_search-query_total_rate":{
            "avg_bucket":{
                "buckets_path":"time>search-query_total_rate"
            }
        },
        "avg_indexing-index_total_rate":{
            "avg_bucket":{
                "buckets_path":"time>indexing-index_total_rate"
            }
        },
        "avg_indices-search-query_avg_time":{
            "avg_bucket":{
                "buckets_path":"time>indices-search-query_avg_time"
            }
        }
    },
    "size":0
}